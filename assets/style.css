/* Long Horizon Hierarchy – merged, conflict-free stylesheet */
/* Combines themeable variables, responsive nav, hero, highlights, results, resources, bibtex, and footer. */

/* ============================= */
/* Root variables & base theming */
/* ============================= */
:root {
  /* Layout */
  --container-width: 1200px;
  --max-width: 1080px;

  /* Typography */
  --font-body: "DM Sans", "Google Sans", "Segoe UI", sans-serif;
  --font-display: "Space Grotesk", "Google Sans", "Segoe UI", sans-serif;

  /* Motion & shape */
  --transition: 200ms ease;
  --radius-lg: 20px;

  /* Shadows (both naming schemes supported) */
  --shadow-elevated: 0 24px 55px rgba(7, 11, 25, 0.35);
  --shadow-soft: 0 18px 40px rgba(7, 11, 25, 0.2);
  --shadow-lg: 0 24px 48px rgba(0, 0, 0, 0.35);
  --shadow-sm: 0 8px 20px rgba(0, 0, 0, 0.25);
}

/* Dark theme variables */
body[data-theme="dark"] {
  --color-bg: #050913;
  --color-surface: rgba(12, 18, 36, 0.88);
  --color-surface-alt: rgba(12, 20, 40, 0.7);
  --color-section: rgba(6, 12, 28, 0.62);
  --color-border: rgba(255, 255, 255, 0.08);
  --color-text: #edf1ff;
  --color-heading: #ffffff;
  --color-muted: rgba(218, 227, 255, 0.75);
  --color-accent: #7b83ff;
  --color-accent-strong: #8f7bff;
  --color-accent-soft: rgba(123, 131, 255, 0.14);
  --color-hero-gradient: radial-gradient(circle at 10% 10%, #25356d 0%, #0c142a 46%, #050913 100%);
  --color-header: rgba(6, 12, 26, 0.85);
  --color-outline: rgba(123, 131, 255, 0.28);
  --color-button-text: #ffffff;
  --color-footer-bg: rgba(6, 12, 26, 0.92);
  /* Extras used by legacy rules */
  --color-card: #0f1c33;
  color-scheme: dark;
}

/* Light theme variables */
body[data-theme="light"] {
  --color-bg: #f4f6ff;
  --color-surface: rgba(255, 255, 255, 0.9);
  --color-surface-alt: #eef2ff;
  --color-section: rgba(228, 234, 255, 0.65);
  --color-border: rgba(17, 24, 39, 0.12);
  --color-text: #15213c;
  --color-heading: #0b1120;
  --color-muted: rgba(71, 85, 105, 0.8);
  --color-accent: #4c51bf;
  --color-accent-strong: #312e81;
  --color-accent-soft: rgba(76, 81, 191, 0.12);
  --color-hero-gradient: radial-gradient(circle at 5% 25%, #ffffff 0%, #eef2ff 48%, #e0e7ff 100%);
  --color-header: rgba(255, 255, 255, 0.88);
  --color-outline: rgba(76, 81, 191, 0.28);
  --color-button-text: #ffffff;
  --color-footer-bg: rgba(235, 240, 255, 0.85);
  /* Override shadows for light */
  --shadow-elevated: 0 28px 48px rgba(15, 23, 42, 0.16);
  --shadow-soft: 0 18px 38px rgba(15, 23, 42, 0.12);
  --color-card: #ffffff;
  color-scheme: light;
}

/* ================= */
/* Global resets     */
/* ================= */
*,
*::before,
*::after { box-sizing: border-box; }

html { scroll-behavior: smooth; }

body {
  margin: 0;
  font-family: var(--font-body);
  background: var(--color-bg);
  background-color: var(--color-bg);
  color: var(--color-text);
  min-height: 100vh;
  line-height: 1.6;
  transition: background 0.35s ease, color 0.35s ease;
}

main {
  display: flex;
  flex-direction: column;
  gap: 4.5rem;
  padding: 3rem 0 5rem;
}

main section { scroll-margin-top: 96px; }

p { margin: 0 0 1rem; }
ul { margin: 0 0 1.25rem; padding-left: 1.25rem; }
li { margin-bottom: 0.6rem; }

a {
  color: inherit;
  text-decoration: none;
  transition: color var(--transition), opacity var(--transition);
}
a:hover,
a:focus,
a:focus-visible { color: var(--color-accent); }

img,
video { display: block; max-width: 100%; }
iframe { border: 0; }

/* ================= */
/* Layout helpers    */
/* ================= */
.container { width: min(92%, var(--container-width)); margin: 0 auto; }
section { padding: clamp(3rem, 6vw, 5.5rem) 0; }

.section-title {
  font-family: var(--font-display);
  font-size: clamp(2rem, 5vw, 3rem);
  margin: 0 0 0.5rem;
  color: var(--color-heading);
  text-align: center;
}

.section-subtitle {
  font-size: 1.05rem;
  color: var(--color-muted);
  max-width: 720px;
  margin: 0 auto clamp(2rem, 5vw, 3rem);
  text-align: center;
}

/* ================= */
/* Buttons           */
/* ================= */
.button{
  display:inline-flex;align-items:center;justify-content:center;gap:0.45rem;
  padding:0.6rem 1.2rem;border-radius:999px;border:1px solid transparent;
  background:var(--color-accent);color:var(--color-button-text);font-weight:600;letter-spacing:0.02em;
  transition:transform var(--transition),box-shadow var(--transition),border-color var(--transition),background var(--transition);
  box-shadow:var(--shadow-sm);
}
.button .icon{font-size:1.05rem;line-height:1;}
.button:hover,.button:focus,.button:focus-visible{transform:translateY(-1px);box-shadow:0 14px 32px rgba(123,131,255,.35);}
.button.secondary{background:transparent;border-color:var(--color-border);color:var(--color-heading);box-shadow:none;}
.button.secondary:hover,.button.secondary:focus,.button.secondary:focus-visible{border-color:var(--color-accent);color:var(--color-heading);box-shadow:0 12px 28px rgba(123,131,255,.24);}

/* ================= */
/* Header & Nav      */
/* ================= */
.site-header{
  position:sticky;top:0;z-index:1000;background:var(--color-header);
  border-bottom:1px solid var(--color-border);backdrop-filter:blur(18px);
}
.site-header__inner{display:flex;align-items:center;gap:1.5rem;padding:0.9rem 0;position:relative;}
.site-logo,.logo{font-family:var(--font-display);font-weight:600;letter-spacing:.08em;text-transform:uppercase;font-size:.9rem;color:var(--color-heading);}

.menu-toggle{
  display:none;align-items:center;gap:.4rem;padding:.45rem .95rem;border-radius:999px;border:1px solid var(--color-border);
  background:var(--color-surface);color:var(--color-heading);font-weight:600;letter-spacing:.04em;text-transform:uppercase;cursor:pointer;
  transition:border-color var(--transition),background var(--transition),color var(--transition);
}
.menu-toggle:hover,.menu-toggle:focus-visible{border-color:var(--color-accent);color:var(--color-heading);}

.theme-toggle{
  display:inline-flex;align-items:center;gap:.45rem;margin-left:1rem;padding:.45rem .9rem;border-radius:999px;border:1px solid var(--color-border);
  background:var(--color-surface);color:var(--color-heading);font-weight:600;font-size:.85rem;letter-spacing:.03em;text-transform:uppercase;cursor:pointer;
  transition:border-color var(--transition),background var(--transition),color var(--transition),box-shadow var(--transition);
}
.theme-toggle:hover,.theme-toggle:focus-visible{border-color:var(--color-accent);box-shadow:0 12px 32px rgba(123,131,255,.22);}
.theme-toggle__icon{font-size:1rem;line-height:1;}

.site-nav{display:flex;align-items:center;gap:1.75rem;margin-left:auto;font-size:.95rem;}
.site-nav a{
  font-weight:500;letter-spacing:.02em;font-size:.92rem;color:var(--color-muted);padding:.25rem 0;position:relative;
}
.site-nav a::after{
  content:"";position:absolute;left:0;bottom:-.4rem;width:100%;height:2px;border-radius:1px;
  background:linear-gradient(90deg,transparent,var(--color-accent),transparent);
  transform:scaleX(0);transform-origin:center;transition:transform 160ms ease;
}
.site-nav a:hover::after,.site-nav a:focus-visible::after,.site-nav a.is-active::after{transform:scaleX(1);}
.site-nav a.is-active{color:var(--color-heading);}

/* ============ */
/* Hero section */
/* ============ */
.hero{background:var(--color-hero-gradient);padding-top:clamp(4rem,8vw,6.5rem);padding-bottom:clamp(4rem,8vw,6.5rem);border-bottom:1px solid var(--color-border);}
.hero__inner{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:clamp(2.5rem,6vw,4.5rem);align-items:center;}
.hero__eyebrow,.tagline{
  display:inline-block;font-size:.85rem;letter-spacing:.28em;text-transform:uppercase;color:var(--color-accent);
  background:var(--color-accent-soft);padding:.35rem .85rem;border-radius:999px;font-weight:600;
}
.hero__title,.hero h1{font-family:var(--font-display);font-size:clamp(2.6rem,6vw,3.8rem);margin:1rem 0 1.25rem;color:var(--color-heading);line-height:1.12;}
.hero__lead,.hero__subtitle{font-size:1.1rem;color:var(--color-muted);margin:1.5rem 0 2rem;max-width:36ch;}
.hero__meta{display:grid;gap:.5rem;color:var(--color-muted);font-size:.98rem;}
.hero__authors,.authors span{color:var(--color-heading);font-weight:600;margin-inline-start:.4rem;}
.hero__media,.hero__visual{display:grid;gap:1rem;}

/* Video containers */
.video-frame,.video-wrapper{
  position:relative;width:100%;aspect-ratio:16/9;border-radius:20px;overflow:hidden;background:var(--color-section);
  border:1px solid var(--color-border);box-shadow:var(--shadow-elevated);
}
.video-wrapper{padding-bottom:0;height:auto;}
.video-frame iframe,.video-wrapper iframe{position:absolute;inset:0;width:100%;height:100%;border:0;}
.video-caption{font-size:.9rem;color:var(--color-muted);}

.profile-card{background:var(--color-surface);border-radius:var(--radius-lg);border:1px solid var(--color-border);box-shadow:var(--shadow-elevated);overflow:hidden;display:grid;}
.profile-card__image{width:100%;aspect-ratio:1/1;object-fit:cover;}
.profile-card__body{padding:1.35rem;display:grid;gap:.75rem;}
.profile-card__tag{font-size:.8rem;letter-spacing:.24em;text-transform:uppercase;color:var(--color-accent);}
.profile-card__list{margin:0;padding-left:1.1rem;color:var(--color-muted);}
.profile-card__list li{margin-bottom:.45rem;}
.profile-card__list li:last-child{margin-bottom:0;}

/* ============ */
/* Teaser strip */
/* ============ */
.teaser{background:var(--color-section);border-top:1px solid var(--color-border);border-bottom:1px solid var(--color-border);}
.teaser .video-frame{max-width:960px;margin:0 auto;}

/* ================== */
/* Section header row */
/* ================== */
.section-header{display:flex;align-items:flex-end;justify-content:space-between;gap:2rem;margin-bottom:2rem;}
.section-header h2{font-family:var(--font-display);font-size:2rem;margin:0;}
.section-header p{margin:0;color:var(--color-muted);max-width:50ch;}

/* ===================== */
/* Highlights & Abstract */
/* ===================== */
.highlights{margin-top:1rem;}
.highlight-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1.5rem;}
.highlight-card{
  padding:1.75rem;border-radius:var(--radius-lg);background:var(--color-surface);border:1px solid var(--color-border);
  box-shadow:var(--shadow-soft);display:grid;gap:.75rem;
}
.highlight-card h3{margin:0;font-family:var(--font-display);color:var(--color-heading);}
.highlight-card p{margin:0;color:var(--color-muted);}
.abstract{background:rgba(3,7,16,.6);padding:3rem 0;border-block:1px solid var(--color-border);}
.abstract .content,.abstract p{max-width:780px;margin:0 auto;font-size:1.05rem;color:var(--color-muted);line-height:1.6;}

/* ================= */
/* Publications area */
/* ================= */
.results{padding:clamp(3rem,6vw,4.5rem) 0;}
.publication-groups{display:grid;gap:clamp(1.75rem,4vw,2.5rem);}
.publication-group{
  position:relative;overflow:hidden;border-radius:var(--radius-lg);border:1px solid var(--color-border);
  background:linear-gradient(135deg,rgba(123,131,255,.12),transparent 45%),var(--color-surface);
  padding:clamp(1.85rem,4vw,2.65rem);box-shadow:var(--shadow-soft);
  transform:translateY(42px);opacity:0;transition:transform .55s cubic-bezier(.21,.78,.35,1),opacity .55s ease;
  transition-delay:calc(var(--animation-index,0)*90ms);
}
.publication-group::before{
  content:'';position:absolute;inset:0;background:radial-gradient(circle at top right,rgba(123,131,255,.25),transparent 55%);
  pointer-events:none;opacity:.8;
}
.publication-group>*{position:relative;z-index:1;}
.publication-group.is-visible{transform:translateY(0);opacity:1;}
.publication-group__header{display:grid;gap:.65rem;margin-bottom:clamp(1.25rem,3vw,1.85rem);}
.publication-group__badge{
  width:fit-content;padding:.4rem .9rem;border-radius:999px;background:rgba(123,131,255,.22);
  color:var(--color-heading);font-weight:600;letter-spacing:.05em;text-transform:uppercase;font-size:.8rem;
}
.publication-group__description{margin:0;color:var(--color-muted);font-size:1rem;max-width:60ch;}
.publication-group__milestone{margin:0;color:var(--color-heading);font-weight:600;font-size:.95rem;}
.publication-list{list-style:none;margin:0;padding:0;display:grid;gap:1.15rem;}
.publication-card{
  border-radius:clamp(1rem,3vw,1.35rem);border:1px solid rgba(255,255,255,.06);background:rgba(12,18,36,.55);
  backdrop-filter:blur(14px);padding:clamp(1.35rem,3.5vw,1.75rem);display:grid;gap:.75rem;
}
body[data-theme='light'] .publication-card{background:rgba(255,255,255,.8);border-color:rgba(49,46,129,.12);}
.publication-card__meta{
  display:flex;flex-wrap:wrap;gap:.65rem;justify-content:space-between;align-items:center;font-size:.85rem;
  letter-spacing:.03em;text-transform:uppercase;color:var(--color-muted);
}
.publication-card__venue{font-weight:600;}
.publication-card__status{padding:.25rem .65rem;border-radius:999px;background:rgba(123,131,255,.2);color:var(--color-heading);font-weight:600;}
.publication-card__title{margin:0;font-family:var(--font-display);font-size:clamp(1.2rem,3vw,1.55rem);color:var(--color-heading);}
.publication-card__authors{margin:0;color:var(--color-muted);font-size:.95rem;}
.publication-card__actions{margin-top:.5rem;display:flex;flex-wrap:wrap;gap:.75rem;}
.publication-card__action{
  display:inline-flex;align-items:center;justify-content:center;gap:.4rem;padding:.45rem 1.25rem;border-radius:999px;
  border:1px solid var(--color-border);background:var(--color-surface-alt);color:var(--color-heading);font-size:.85rem;font-weight:600;
  letter-spacing:.08em;text-transform:uppercase;transition:border-color var(--transition),background var(--transition),color var(--transition),transform var(--transition);
  cursor:pointer;text-decoration:none;
}
a.publication-card__action:hover,a.publication-card__action:focus-visible{border-color:transparent;background:var(--color-accent);color:var(--color-button-text);transform:translateY(-1px);}
button.publication-card__action{font:inherit;background:transparent;}
button.publication-card__action[disabled]{cursor:not-allowed;border-style:dashed;border-color:var(--color-border);color:var(--color-muted);opacity:.7;}
@media (max-width:720px){.publication-card__meta{flex-direction:column;align-items:flex-start;gap:.4rem;}}
@media (prefers-reduced-motion:reduce){.publication-group{transform:none!important;opacity:1!important;transition-duration:.001ms!important;}}

/* ================= */
/* Flagship projects */
/* ================= */
.portfolio{background:var(--color-section);border-top:1px solid var(--color-border);border-bottom:1px solid var(--color-border);}
.project-showcase{display:grid;gap:clamp(1.75rem,4vw,2.5rem);}

.project-case{
  position:relative;overflow:hidden;display:grid;grid-template-columns:minmax(0,1fr) minmax(0,.95fr);
  align-items:stretch;gap:clamp(1.5rem,4vw,2.25rem);padding:clamp(1.75rem,4vw,2.5rem);
  border-radius:var(--radius-lg);border:1px solid color-mix(in srgb,var(--color-border) 55%,transparent);
  background:color-mix(in srgb,var(--color-surface) 72%,rgba(255,255,255,.58));box-shadow:var(--shadow-sm);
  transform:translateY(48px);opacity:0;transition:transform .6s cubic-bezier(.21,.78,.35,1),opacity .6s ease;
  transition-delay:calc(var(--animation-index,0)*110ms);
}
.project-case::before{
  content:'';position:absolute;inset:-20% 15% 55% -25%;
  background:radial-gradient(circle at top left,rgba(123,131,255,.28),transparent 65%),
             radial-gradient(circle at bottom right,rgba(111,225,255,.18),transparent 70%);
  opacity:.45;pointer-events:none;
}
.project-case>*{position:relative;z-index:1;}
.project-case.is-visible{transform:translateY(0);opacity:1;}

/* PROJECT IMAGES — show full image (no zoom/crop) */
.project-case__media{
  position:relative;border-radius:calc(var(--radius-lg) - 8px);
  padding:0;
  background:transparent;
  box-shadow:none;
  display:flex;flex-direction:column;justify-content:center;
}
.project-case__media::after{display:none;}
.project-case__media-grid{
  position:relative;z-index:1;display:flex;height:100%;
  flex-direction:column;justify-content:center;
  gap:clamp(.6rem,2vw,1rem);
}
.project-case__media-main,
.project-case__media-secondary{
  position:relative;border-radius:calc(var(--radius-lg) - 12px);
  overflow:hidden;display:flex;align-items:center;justify-content:center;
  background:transparent;
  box-shadow:none;
  min-height:220px;
  flex-shrink:0;
}
.project-case__media-main img,
.project-case__media-secondary img{
  width:100%;height:100%;object-fit:contain;object-position:center;display:block;
  border-radius:inherit;
}
.project-case__media-secondary{display:none;opacity:0;transform:translateY(18px) scale(.98);}
.project-case.is-expanded .project-case__media{min-height:100vh;}
.project-case.is-expanded .project-case__media-grid{justify-content:stretch;height:100%;}
.project-case.is-expanded .project-case__media-main,
.project-case.is-expanded .project-case__media-secondary{flex:1 1 0;min-height:0;}
.project-case.is-expanded .project-case__media-secondary{
  display:flex;opacity:1;transform:none;
  animation:projectMediaReveal .7s cubic-bezier(.23,1,.32,1) forwards;
  animation-delay:var(--media-reveal-delay,0s);
}

@keyframes projectMediaReveal{
  from{opacity:0;transform:translateY(24px) scale(.96);}
  to{opacity:1;transform:translateY(0) scale(1);}
}

@media (prefers-reduced-motion:reduce){
  .project-case__media-secondary{transform:none;}
  .project-case.is-expanded .project-case__media-secondary{animation:none;}
}
@media (max-width:720px){
  .project-case__media-main,
  .project-case__media-secondary{min-height:200px;}
}

.project-case__content{display:grid;gap:clamp(1.5rem,4vw,2.35rem);align-content:stretch;}
.project-case__summary{display:grid;gap:clamp(.85rem,2.5vw,1.4rem);}
.project-case__eyebrow{margin:0;font-size:.9rem;letter-spacing:.08em;text-transform:uppercase;color:var(--color-muted);}
.project-case__title{margin:0;font-family:var(--font-display);font-size:clamp(1.75rem,4vw,2.35rem);color:var(--color-heading);}
.project-case__description{margin:0;color:var(--color-text);font-size:1rem;line-height:1.65;max-width:58ch;}
.project-case__details{display:grid;gap:.85rem;align-content:start;align-items:stretch;grid-template-columns:minmax(0,1fr);}
.project-case__meta-block{
  display:grid;grid-template-columns:auto minmax(0,1fr);gap:.75rem;padding:.85rem 1rem;border-radius:.9rem;
  border:1px solid color-mix(in srgb,var(--color-border) 50%,transparent);
  background:color-mix(in srgb,var(--color-surface) 75%, rgba(255,255,255,.35));align-items:start;
}
body[data-theme='light'] .project-case__meta-block{background:rgba(255,255,255,.9);border-color:rgba(49,46,129,.18);}
.project-case__meta-block--accent{background:color-mix(in srgb,rgba(123,131,255,.32) 70%, rgba(255,255,255,.58));border-color:color-mix(in srgb,var(--color-accent) 45%,transparent);}
.project-case__meta-label{font-size:.8rem;letter-spacing:.08em;text-transform:uppercase;color:var(--color-muted);white-space:nowrap;align-self:center;}
.project-case__meta-value{font-size:.96rem;font-weight:600;color:var(--color-heading);}
.project-case__tech-list{
  margin:0;padding:0;list-style:none;display:flex;flex-wrap:wrap;gap:.45rem;justify-content:flex-start;
}
.project-case__tech-list li{padding:.35rem .75rem;border-radius:999px;background:rgba(123,131,255,.16);color:var(--color-heading);font-size:.85rem;font-weight:600;}
.project-case__footnote{display:grid;gap:clamp(1rem,3vw,1.45rem);align-content:start;}
.project-case__cta{
  display:inline-grid;grid-auto-flow:column;align-items:center;justify-content:flex-start;gap:.55rem;padding:.6rem 1.45rem;
  border-radius:999px;border:1px solid color-mix(in srgb,var(--color-accent) 55%,transparent);
  background:linear-gradient(120deg,rgba(123,131,255,.2),rgba(111,225,255,.16));
  color:var(--color-heading);font-size:.82rem;font-weight:700;letter-spacing:.12em;text-transform:uppercase;
  cursor:pointer;transition:transform .4s cubic-bezier(.23,1,.32,1),box-shadow .4s ease,background .4s ease,color .4s ease;
  justify-self:start;
}
.project-case__cta:hover,.project-case__cta:focus-visible{
  transform:translateY(-2px);
  box-shadow:0 18px 40px rgba(29,43,97,.35);
  background:linear-gradient(120deg,rgba(123,131,255,.35),rgba(111,225,255,.28));
}
.project-case__cta:focus-visible{outline:2px solid color-mix(in srgb,var(--color-accent) 65%,transparent);outline-offset:3px;}
.project-case__cta-icon{font-size:1rem;line-height:1;transition:transform .4s cubic-bezier(.25,1,.35,1);}
.project-case__cta-label{font-size:.8rem;letter-spacing:.12em;text-transform:uppercase;}
.project-case__cta.is-active{
  background:linear-gradient(120deg,var(--color-accent),color-mix(in srgb,var(--color-accent) 45%,#6fe1ff));
  color:var(--color-button-text);
  box-shadow:0 24px 45px rgba(21,27,66,.45);
}
.project-case__cta.is-active .project-case__cta-icon{transform:rotate(45deg);}
.project-case__story{
  position:relative;overflow:hidden;border-radius:calc(var(--radius-lg) - 10px);
  border:1px solid color-mix(in srgb,var(--color-accent) 35%,rgba(255,255,255,.4));
  background:linear-gradient(140deg,rgba(18,24,51,.92) 0%,rgba(35,47,94,.78) 100%);
  box-shadow:0 28px 60px rgba(6,10,26,.55);
  padding:clamp(1.4rem,4vw,1.85rem);
  max-height:0;
  transition:max-height .55s cubic-bezier(.25,.9,.25,1),opacity .45s ease,transform .55s cubic-bezier(.25,.9,.25,1);
  opacity:0;transform:translateY(18px);pointer-events:none;
}
.project-case.is-expanded .project-case__story{opacity:1;transform:translateY(0);pointer-events:auto;}
.project-story{display:grid;gap:clamp(1rem,3vw,1.4rem);}
.project-story__window{
  position:relative;padding:clamp(1.1rem,3.2vw,1.75rem);
  border-radius:calc(var(--radius-lg) - 8px);
  background:color-mix(in srgb,rgba(123,131,255,.22) 60%, rgba(9,14,34,.92));
  border:1px solid rgba(123,131,255,.28);
  box-shadow:inset 0 0 0 1px rgba(123,131,255,.16);
  display:grid;gap:clamp(.85rem,2.2vw,1.2rem);
}
.project-story__tag{margin:0;font-size:.78rem;letter-spacing:.14em;text-transform:uppercase;color:rgba(196,204,255,.78);}
.project-story__title{margin:0;font-size:clamp(1.3rem,3vw,1.6rem);font-family:var(--font-display);color:#f4f6ff;}
.project-story__body{display:grid;gap:clamp(.75rem,2vw,1rem);}
.project-story__body p{margin:0;color:rgba(232,236,255,.88);line-height:1.68;}
.project-story__closing{margin:0;font-family:var(--font-display);font-size:1rem;color:#fdfdff;letter-spacing:.02em;}
body[data-theme='light'] .project-case__story{
  background:linear-gradient(145deg,rgba(255,255,255,.96) 0%,rgba(232,237,255,.9) 100%);
  border:1px solid rgba(76,81,191,.28);
  box-shadow:0 18px 36px rgba(76,81,191,.22);
}
body[data-theme='light'] .project-story__window{
  background:color-mix(in srgb,rgba(123,131,255,.16) 55%,rgba(255,255,255,.92));
  border-color:rgba(76,81,191,.22);
  box-shadow:none;
}
body[data-theme='light'] .project-story__title{color:var(--color-heading);}
body[data-theme='light'] .project-story__body p{color:rgba(30,36,62,.78);}
body[data-theme='light'] .project-story__closing{color:var(--color-heading);}
body[data-theme='light'] .project-case__cta{background:linear-gradient(120deg,rgba(123,131,255,.18),rgba(111,225,255,.12));color:var(--color-heading);}

@media (max-width:1100px){.project-case{grid-template-columns:minmax(0,1.1fr) minmax(0,1fr);}}
@media (max-width:960px){
  .project-case{grid-template-columns:1fr;}
  .project-case__media{width:100%;max-height:none;}
  .project-case__content{gap:clamp(1.2rem,5vw,2rem);}
}
@media (max-width:640px){
  .project-case__details{grid-template-columns:1fr;}
  .project-case__media{width:100%;}
  .project-case__meta-block{padding:.85rem 1rem;}
}
@media (prefers-reduced-motion:reduce){.project-case{transform:none!important;opacity:1!important;transition-duration:.001ms!important;}}

/* ===================== */
/* Extracurricular cards */
/* ===================== */
.extracurriculars{
  background:linear-gradient(135deg,color-mix(in srgb,var(--color-section) 70%,rgba(123,131,255,.2)) 0%,color-mix(in srgb,var(--color-section) 55%,rgba(111,225,255,.18)) 100%);
  border-block:1px solid color-mix(in srgb,var(--color-border) 65%,transparent);position:relative;overflow:hidden;
}
.extracurriculars::before{
  content:"";position:absolute;inset:0;background:radial-gradient(circle at 12% -8%,rgba(123,131,255,.25),transparent 55%),
            radial-gradient(circle at 82% 105%,rgba(111,225,255,.22),transparent 60%);pointer-events:none;mix-blend-mode:soft-light;
}
.extracurriculars .container{position:relative;z-index:1;}

.extracurriculars__masonry{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:clamp(1.75rem,4vw,2.5rem);}
.extracurricular-card{
  --easing:cubic-bezier(.22,1,.36,1);
  position:relative;display:grid;grid-template-rows:auto 1fr;background:color-mix(in srgb,var(--color-surface) 90%,rgba(255,255,255,.05));
  border-radius:calc(var(--radius-lg) + 6px);border:1px solid color-mix(in srgb,var(--color-border) 55%,transparent);box-shadow:var(--shadow-soft);
  padding:clamp(1.5rem,3.5vw,2.25rem);overflow:hidden;transform:translateY(32px);opacity:0;animation:card-float .9s var(--easing) forwards;
  animation-delay:calc(var(--index,0)*.12s);backdrop-filter:blur(14px);min-height:clamp(22rem,40vw,24rem);
}
.extracurricular-card::after{content:"";position:absolute;inset:0;pointer-events:none;background:linear-gradient(120deg,rgba(123,131,255,.12),rgba(8,12,24,.22));opacity:0;transition:opacity 250ms var(--easing);}
.extracurricular-card__media{
  position:relative;width:100%;border-radius:calc(var(--radius-lg) - 2px);overflow:hidden;aspect-ratio:4/3;
  box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--color-border) 40%,transparent);margin:0 0 clamp(1.25rem,3vw,1.75rem);
  display:flex;align-items:center;justify-content:center;padding:clamp(.65rem,2vw,1rem);
}
.extracurricular-card__media img{
  width:clamp(70%,82%,88%);max-height:100%;object-fit:contain;object-position:center;filter:saturate(1.08);
  transform:scale(.88);transition:transform 450ms var(--easing),filter 450ms var(--easing);margin:0 auto;border-radius:clamp(12px,2vw,18px);
}
.extracurricular-card__body{display:grid;gap:clamp(.85rem,2vw,1.25rem);align-content:start;}
.extracurricular-card__tag{margin:0;font-size:.9rem;letter-spacing:.04em;text-transform:uppercase;color:color-mix(in srgb,var(--color-accent) 70%,var(--color-muted));}
.extracurricular-card__title{margin:0;font-family:var(--font-display);font-size:clamp(1.15rem,2.5vw,1.45rem);color:var(--color-heading);}
.extracurricular-card__copy{margin:0;color:var(--color-muted);font-size:.95rem;}
.extracurricular-card:hover::after,.extracurricular-card:focus-within::after{opacity:1;}
.extracurricular-card:hover .extracurricular-card__media img,.extracurricular-card:focus-within .extracurricular-card__media img{transform:scale(.98);filter:saturate(1.18);}
@keyframes card-float{0%{transform:translateY(32px);opacity:0;}100%{transform:translateY(0);opacity:1;}}
@media (max-width:960px){.extracurriculars__masonry{grid-template-columns:minmax(0,1fr);} .extracurricular-card{padding:clamp(1.35rem,4vw,1.85rem);min-height:auto;}}
@media (max-width:640px){.extracurriculars__masonry{gap:1.35rem;} .extracurricular-card__body{gap:.75rem;}}

/* ===================== */
/* Contact mini section  */
/* ===================== */
.contact-mini{background:var(--color-section);border-top:1px solid var(--color-border);border-bottom:1px solid var(--color-border);}
.contact-mini__inner{display:grid;gap:clamp(1.5rem,4vw,3rem);align-items:center;grid-template-columns:minmax(0,1fr) minmax(0,1fr);}
.contact-mini__copy .section-title,.contact-mini__copy .section-subtitle{text-align:left;margin-left:0;}
.contact-mini__actions{display:grid;gap:1rem;justify-items:start;}
.contact-chip{
  display:inline-flex;flex-direction:column;gap:.35rem;padding:.85rem 1.15rem;border-radius:1rem;border:1px solid var(--color-border);
  background:color-mix(in srgb,var(--color-surface) 92%,transparent);box-shadow:var(--shadow-sm);
  transition:transform var(--transition),box-shadow var(--transition),border-color var(--transition);
}
.contact-chip__label{font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.08em;color:color-mix(in srgb,var(--color-muted) 80%,var(--color-heading));}
.contact-chip__value{font-size:1.05rem;color:var(--color-heading);font-weight:600;}
.contact-chip:hover,.contact-chip:focus-visible{transform:translateY(-2px);box-shadow:var(--shadow-soft);border-color:var(--color-accent);}
.contact-mini__links{display:inline-flex;align-items:center;gap:.65rem;color:var(--color-muted);font-weight:500;}
.contact-mini__links a{color:var(--color-heading);font-weight:600;}
.contact-mini__links a:hover,.contact-mini__links a:focus-visible{color:var(--color-accent);}
@media (max-width:960px){
  .contact-mini__inner{grid-template-columns:1fr;}
  .contact-mini__copy .section-title,.contact-mini__copy .section-subtitle{text-align:center;}
  .contact-mini__actions{justify-items:center;}
}

/* ============== */
/* Footer & Back  */
/* ============== */
.site-footer{background:var(--color-footer-bg);border-top:1px solid var(--color-border);padding:2.5rem 0;color:var(--color-muted);}
.site-footer .container{display:flex;flex-wrap:wrap;gap:1rem;justify-content:space-between;align-items:center;}
.site-footer p{margin:0 0 .75rem;color:var(--color-muted);text-align:center;}
.back-to-top{
  display:inline-flex;align-items:center;gap:.35rem;padding:.45rem .85rem;border-radius:999px;border:1px solid var(--color-border);
  color:var(--color-heading);transition:border-color var(--transition),color var(--transition),background var(--transition);text-align:center;
}
.back-to-top:hover,.back-to-top:focus,.back-to-top:focus-visible{color:var(--color-heading);border-color:var(--color-accent);background:var(--color-accent-soft);}

/* ================= */
/* Responsive rules  */
/* ================= */
@media (max-width:1080px){
  .hero__inner,.architecture__grid,.architecture__content{grid-template-columns:minmax(0,1fr);}
  .theme-toggle{margin-left:0;}
}
@media (max-width:960px){
  .site-nav{
    display:none;position:absolute;top:calc(100% + .75rem);right:0;width:min(280px,82vw);
    flex-direction:column;align-items:stretch;padding:.75rem;border-radius:1rem;background:var(--color-surface);
    border:1px solid var(--color-border);box-shadow:var(--shadow-elevated);
  }
  .site-nav.is-open{display:flex;}
  .site-nav a{padding:.65rem .75rem;border-radius:.75rem;color:var(--color-heading);}
  .site-nav a::after{display:none;}
  .site-nav a:hover,.site-nav a:focus-visible,.site-nav a.is-active{background:var(--color-accent-soft);}
  .menu-toggle{display:inline-flex;margin-left:auto;}
  .theme-toggle{order:3;}
}
@media (max-width:840px){
  .site-header{gap:1rem;}
  .site-nav.is-open{max-height:400px;padding-top:.5rem;}
}
@media (max-width:720px){
  section{padding:clamp(2.5rem,8vw,4rem) 0;}
  .button-group{justify-content:flex-start;}
  .highlight-grid,.results__grid,.result-grid,.long-horizon__grid,.resource-grid{grid-template-columns:minmax(0,1fr);}
  .site-footer .container{flex-direction:column;align-items:flex-start;}
}
@media (max-width:600px){
  .hero__lead,.hero__subtitle{max-width:unset;}
  main{gap:3.5rem;}
  .section-header{flex-direction:column;align-items:flex-start;gap:1rem;}
}
@media (max-width:540px){
  .hero__title,.hero h1{font-size:clamp(2.2rem,8vw,2.6rem);}
  .hero__inner{gap:2.25rem;}
}

/* =================== */
/* Research timeline   */
/* =================== */
.timeline-section{padding:4.5rem 0;}
.timeline{
  position:relative;max-width:1120px;margin:0 auto clamp(3rem,6vw,3.5rem);
}
.timeline::after{
  content:'';position:absolute;top:0;bottom:clamp(3rem,6vw,3.5rem);left:50%;transform:translateX(-50%);
  width:4px;background:linear-gradient(180deg,var(--color-accent-soft) 0%,var(--color-accent) 45%,var(--color-accent-soft) 100%);opacity:.8;
}
.timeline-item{
  position:relative;width:50%;padding:0 clamp(2rem,4vw,2.5rem) clamp(2.25rem,5vw,2.5rem);
  display:flex;justify-content:flex-end;opacity:0;transform:translateY(48px);
  transition:transform .6s ease,opacity .6s ease;transition-delay:calc(var(--animation-index,0)*.12s);
}
.timeline-item.is-visible{opacity:1;transform:translateY(0);}
.timeline-item:last-child{padding-bottom:0;}
.timeline-item:nth-child(odd){
  left:0;text-align:left;padding-right:clamp(2.25rem,5vw,3rem);padding-left:clamp(1rem,3vw,1.75rem);
}
.timeline-item:nth-child(even){
  left:50%;justify-content:flex-start;padding-left:clamp(2.25rem,5vw,3rem);padding-right:clamp(1rem,3vw,1.75rem);
}
.timeline-item:nth-child(odd) .timeline-image,.timeline-item:nth-child(odd) .timeline-content{margin-right:clamp(.75rem,2vw,1.25rem);}
.timeline-item:nth-child(even) .timeline-image,.timeline-item:nth-child(even) .timeline-content{margin-left:clamp(.75rem,2vw,1.25rem);}

.timeline-item::before{
  content:'';position:absolute;top:24px;width:16px;height:16px;border-radius:50%;border:3px solid var(--color-accent);
  background:var(--color-bg);box-shadow:0 0 0 4px rgba(123,131,255,.12);z-index:1;
}
.timeline-item:nth-child(odd)::before{right:-8px;}
.timeline-item:nth-child(even)::before{left:-8px;}

/* LOGO PANEL — no padding, clipped, uniform sizing */
.timeline-content{
  position:relative;background:var(--color-surface);border:1px solid var(--color-border);
  border-radius:var(--radius-lg);padding:0;box-shadow:var(--shadow-soft);display:grid;gap:0;overflow:hidden;width:min(100%,560px);
  transform-style:preserve-3d;
}
.timeline-image{
  width:100%;height:clamp(95px,16vw,125px);
  margin:0;padding:0;border-bottom:1px solid var(--color-border);background:var(--color-section);
  display:flex;align-items:center;justify-content:center;border-top-left-radius:inherit;border-top-right-radius:inherit;overflow:hidden;isolation:isolate;
  position:relative;z-index:1;transition:filter .45s ease,opacity .45s ease;
}
.timeline-image img{
  display:block;object-fit:contain;max-width:86%;max-height:78%;width:auto;height:auto;background:transparent;
  mix-blend-mode:multiply;image-rendering:-webkit-optimize-contrast;
}

.timeline-body{
  padding:1.15rem;display:grid;gap:.65rem;position:relative;z-index:1;
  transition:filter .45s ease,opacity .45s ease,transform .45s ease;
}
.timeline-meta{margin:0;font-size:.9rem;letter-spacing:.01em;color:var(--color-muted);}
.timeline-content h3{margin:0;font-size:1.18rem;font-family:var(--font-display);color:var(--color-heading);}
.timeline-description{margin:0;color:var(--color-text);}

.timeline-content{transition:transform .45s ease,box-shadow var(--transition),border-color var(--transition);}
.timeline-content:hover,
.timeline-content:focus-within{transform:translateY(-6px);box-shadow:var(--shadow-elevated);border-color:rgba(123,131,255,.45);}
.timeline-actions{display:flex;flex-wrap:wrap;gap:.6rem;margin-top:.25rem;}
.timeline-link{display:inline-flex;align-items:center;gap:.35rem;padding:.55rem .85rem;border-radius:999px;font-size:.85rem;letter-spacing:.02em;text-transform:uppercase;font-weight:600;border:1px solid var(--color-border);color:var(--color-muted);text-decoration:none;transition:background .3s ease,border-color .3s ease,color .3s ease,transform .3s ease;}
.timeline-link:hover,
.timeline-link:focus-visible{color:var(--color-heading);border-color:rgba(123,131,255,.5);background:rgba(123,131,255,.08);transform:translateY(-1px);}
.timeline-link--primary{background:linear-gradient(135deg,rgba(124,132,255,.18),rgba(124,132,255,.05));color:var(--color-heading);border-color:rgba(123,131,255,.45);}
.timeline-link--primary:hover,
.timeline-link--primary:focus-visible{background:linear-gradient(135deg,rgba(124,132,255,.32),rgba(124,132,255,.18));border-color:rgba(123,131,255,.65);color:#fff;box-shadow:0 18px 32px rgba(8,12,38,.35);}
body[data-theme="light"] .timeline-link{color:rgba(47,51,89,.78);border-color:rgba(120,126,178,.32);}
body[data-theme="light"] .timeline-link:hover,
body[data-theme="light"] .timeline-link:focus-visible{color:rgba(24,28,68,.96);border-color:rgba(110,116,214,.45);background:rgba(110,116,214,.12);}
body[data-theme="light"] .timeline-link--primary{color:rgba(24,28,68,.96);background:linear-gradient(135deg,rgba(126,134,244,.2),rgba(126,134,244,.08));border-color:rgba(110,116,214,.45);}
body[data-theme="light"] .timeline-link--primary:hover,
body[data-theme="light"] .timeline-link--primary:focus-visible{color:#fff;background:linear-gradient(135deg,rgba(104,112,230,.62),rgba(102,110,226,.44));}

/* Research article pages */
/* ======================= */
body.research-page{background:var(--color-bg);color:var(--color-text);min-height:100vh;}
.research-page__inner{max-width:min(920px,calc(100% - 3rem));margin:0 auto;padding:clamp(2.5rem,6vw,4rem) 0 clamp(4rem,8vw,5rem);display:grid;gap:clamp(1.8rem,4vw,2.4rem);}
.research-page__masthead{display:flex;justify-content:space-between;align-items:center;gap:1rem;}
.research-page__back{display:inline-flex;align-items:center;gap:.5rem;font-weight:600;font-size:.9rem;text-transform:uppercase;letter-spacing:.08em;text-decoration:none;color:var(--color-muted);padding:.45rem .85rem;border-radius:999px;border:1px solid var(--color-border);transition:color .3s ease,border-color .3s ease,background .3s ease,transform .3s ease;}
.research-page__back:hover,
.research-page__back:focus-visible{color:var(--color-heading);border-color:rgba(123,131,255,.45);background:rgba(123,131,255,.1);transform:translateY(-1px);}
.research-article{display:grid;gap:clamp(1.6rem,4vw,2.4rem);}
.research-article__header{display:grid;gap:.85rem;}
.research-article__eyebrow{margin:0;font-size:.8rem;letter-spacing:.22em;text-transform:uppercase;color:var(--color-accent-soft);font-weight:700;}
.research-article__title{margin:0;font-size:clamp(2.15rem,5vw,2.85rem);font-family:var(--font-display);color:var(--color-heading);letter-spacing:.01em;}
.research-article__meta{margin:0;font-size:.95rem;color:var(--color-muted);display:flex;flex-wrap:wrap;gap:.6rem;align-items:center;}
.research-article__lead{margin:0;color:var(--color-text);font-size:1.08rem;line-height:1.7;max-width:65ch;}
.research-article__badge{margin:0;display:flex;gap:1rem;align-items:center;}
.research-article__badge img{width:64px;height:64px;object-fit:contain;border-radius:18px;padding:.65rem;background:var(--color-surface);border:1px solid var(--color-border);box-shadow:var(--shadow-soft);}
.research-article__badge span{font-size:.85rem;color:var(--color-muted);text-transform:uppercase;letter-spacing:.14em;font-weight:600;}
.research-article__hero{margin:clamp(1.6rem,4vw,2.6rem) 0;border-radius:1.5rem;overflow:hidden;box-shadow:0 18px 44px rgba(12,16,44,.18);background:var(--color-surface);border:1px solid rgba(123,131,255,.12);}
.research-article__hero img{display:block;width:100%;height:auto;object-fit:cover;}
.research-article__hero svg{display:block;width:100%;height:auto;}
.research-article__hero figcaption{margin:0;padding:1rem 1.5rem;font-size:.95rem;line-height:1.55;color:var(--color-muted);background:linear-gradient(180deg,rgba(16,20,42,.12),rgba(16,20,42,.04));}
.research-article__content{display:grid;gap:clamp(1.4rem,3.6vw,2rem);}
.research-article__text{margin:0;color:var(--color-text);line-height:1.75;font-size:1.05rem;letter-spacing:0.01em;}
.research-article__text strong{font-family:var(--font-display);font-weight:600;color:var(--color-heading);margin-right:0.35rem;letter-spacing:0.02em;}
.research-article__closing{margin:0;font-size:1.08rem;font-family:var(--font-display);color:var(--color-heading);}
.research-page__footer{display:flex;justify-content:space-between;flex-wrap:wrap;gap:1rem;color:var(--color-muted);font-size:.9rem;}
.research-page__footer a{color:inherit;text-decoration:none;border-bottom:1px solid transparent;transition:border-color .3s ease,color .3s ease;}
.research-page__footer a:hover,
.research-page__footer a:focus-visible{color:var(--color-heading);border-color:rgba(123,131,255,.45);}
@media (max-width:720px){
  .research-page__inner{max-width:calc(100% - 2.5rem);}
  .research-page__masthead{flex-direction:column;align-items:flex-start;}
  .research-article__meta{flex-direction:column;align-items:flex-start;gap:.35rem;}
  .research-article__badge img{width:56px;height:56px;}
}
@media (max-width:960px){
  .timeline-section{padding:3.5rem 0;}
  .timeline::after{left:24px;transform:none;bottom:clamp(2.5rem,10vw,3rem);}
  .timeline-item{width:100%;padding:0 0 2.25rem 3.5rem;display:block;}
  .timeline-item:nth-child(odd){padding-left:3.5rem;padding-right:0;}
  .timeline-item:last-child{padding-bottom:0;}
  .timeline-item:nth-child(even){left:0;padding-left:3.5rem;padding-right:0;}
  .timeline-item::before{left:8px;}
  .timeline-item:nth-child(odd) .timeline-image,
  .timeline-item:nth-child(odd) .timeline-content,
  .timeline-item:nth-child(even) .timeline-image,
  .timeline-item:nth-child(even) .timeline-content{margin-left:0;margin-right:0;}

  .timeline-image{height:clamp(90px,24vw,120px);}
  .timeline-content{width:100%;}
}
@media (prefers-reduced-motion:reduce){
  .timeline-item{transition:none;transform:none;opacity:1;}
  .timeline-content{transition:none;transform:none;}
  .timeline-link{transition:none;}
}


